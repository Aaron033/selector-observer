!function(e){var t=function(t,n,r){var i=this;this.target=t,this.selector=n,this.callback=r,this.observer=new MutationObserver(function(t){setTimeout(function(){var r=i.target.data("contracts");r.forEach(function(e){e.disconnect()});var s=i.selector[0]===">",o=s?i.selector.substr(1):i.selector;t.forEach(function(t){Array.prototype.slice.call(t.addedNodes).forEach(function(t){if(s&&i.target[0]!==e(t).parent()[0])return;e(t).is(o)&&i.callback.call(t);if(s)return;e(n,t).each(function(){i.callback.call(this)})})}),r.forEach(function(e){e.observe()})})}),e(n,t).each(function(){i.callback.call(this)}),this.observe()};t.prototype.disconnect=function(){this.observer.disconnect()},t.prototype.observe=function(){this.observer.observe(this.target[0],{childList:!0,subtree:!0})},e.fn.observe=function(e,n){var r=this.data("contracts");r||(r=[]);var i=r.filter(function(t){return t.selector===e});if(i.length){i[0].callback=n;return}var s=new t(this,e,n);r.push(s),this.data("contracts",r)}}(window.Zepto||window.jQuery);